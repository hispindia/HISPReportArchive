	    <link type="text/css" rel="stylesheet" href="../dhis-web-commons/font-awesome/css/font-awesome.min.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/javascripts/jQuery/ui/css/redmond/jquery-ui.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="screen,print" href="../dhis-web-commons/css/green/green.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="screen,print" href="../dhis-web-commons/css/widgets.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="print" href="../dhis-web-commons/css/print.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/css/menu.css?_rev=19841" />
    <link type="text/css" rel="stylesheet" media="screen" href="../dhis-web-commons/javascripts/jQuery/calendars/css/jquery.calendars.picker.css?_rev=19841" />
        <link type="text/css" rel="stylesheet" href="../api/files/style?_rev=19841" />
    <link rel="shortcut icon" href="../favicon.ico" />

    <script type="text/javascript">
      var dateFormat = 'yy-mm-dd';
    </script>

    <script type="text/javascript" src="../dhis-web-commons/javascripts/es5-shim.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/es5-sham.min.js?_rev=19841"></script>

    <script type="text/javascript" src="../dhis-web-commons/javascripts/ext/ext-all.js"></script>

    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.min.js?_rev=19841"></script>
    <!--[if lte IE 8]><script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/placeholders.jquery.min.js?_rev=19841"></script><![endif]-->
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.utils.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.ext.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.metadata.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.tablesorter.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.upload-1.0.2.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.dhisAjaxSelect.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/ui/jquery-ui.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/ui/jquery.blockUI.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.validate.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.validate.ext.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.cookie.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.glob.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.date.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.tmpl.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/jquery.autogrow.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/underscore.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.util.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/commons.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/commons.ajax.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/lists.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/periodType.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/date.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/json2.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/validationRules.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.array.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.select.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.plus.min.js?_rev=19841"></script>
        <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.period.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/jQuery/calendars/jquery.calendars.picker.min.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.selected.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.comparator.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.availability.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.trigger.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.sharing.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.validation.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.ss.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.ls.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.idb.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.memory.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.storage.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.contextmenu.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.appcache.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.translate.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.menu.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/javascripts/dhis2/dhis2.menu.ui.js?_rev=19841"></script>
    <script type="text/javascript" src="../dhis-web-commons/i18nJavaScript.action?_rev=19841"></script>
    <script type="text/javascript" src="../main.js?_rev=19841"></script>
    <script type="text/javascript" src="../request.js?_rev=19841"></script>

        <script type="text/javascript" src="../dhis-web-commons/oust/oust.js?_rev=19841"></script>
        <script type="text/javascript" src="javascript/generateReport.js?_rev=19841"></script>
        <script type="text/javascript" src="../api/files/script?_rev=19841"></script>
    <!-- Create global system calendar -->
    <script>
      dhis2.period.format = 'yyyy-mm-dd';
            dhis2.period.calendar = $.calendars.instance('gregorian');
            dhis2.period.generator = new dhis2.period.PeriodGenerator( dhis2.period.calendar, dhis2.period.format );
      dhis2.period.picker = new dhis2.period.DatePicker( dhis2.period.calendar, dhis2.period.format );
    </script>

		<style> 
			
			div
			{
				margin:0;
				padding:0
			}
			
			label{
				padding:0;
				margin:0;
			}
			body
			{
				background:#fff;
				margin:0;
				padding:0;
			}
			
			#mainPage
			{
				position:absolute;
				top:0;
				left:0;
				height:100%;
				width:100%;
				margin:0;
			}
			
			#NepalHeader
			{
				position:fixed;
				top:48px;
				background:#87CEFA;
				width:100%;
				height:50px;
				left:0px;
				text-align:center;
				color:#fff;
				font-size:25px;
				font-weight:bold;
				padding-top:20px;
				box-shadow: 1px 1px 10px #ccc;
			}
			
			#NepalFooter
			{
				position:fixed;
				bottom:0;
				background:#87CEFA;
				width:100%;
				height:10%;
				left:0px;
				color:#fff;
				font-size:25px;
				font-weight:bold;
				box-shadow: 1px 1px 10px #444;
			}

			.content
			{
				width:800px;
				height:430px;
				margin-left: auto;
				margin-right: auto;
				margin-top:130px;
				background:#fff;
			}
			select
			{
				width:300px;
				text-align:center;
				font-weight:bold;
				font-family:verdana;
				font-size:24px;
				border-radius:3px;
				margin-top:15px;
			}
			
			.monthSel
			{
				width:300px;
				text-align:center;
				font-weight:bold;
				font-family:verdana;
				font-size:12px;
				border-radius:3px;
			}

			input[type=radio]
			{
				width:20px;
				height:20px;
				background:#fff;
			}

			input[type=button]
			{
				width:150px;
				text-align:center;
				font-weight:bold;
				font-family:verdana;
				font-size:13px;
				margin-top:20px;
			}

			input[type=month]
			{
				width:200px;
				text-align:center;
				font-weight:bold;
				font-family:verdana;
				font-size:13px;
				margin-top:20px;
			}
			input[type=number]
			{
				padding:0;
				margin:0;
				margin-top:-3px;
			}


			.input_back
			{
				display:inline-block;
				width:230px;
				padding:10px 0;
				margin:0 auto;
				text-align:center;
				background:#ccc;
				margin-top:15px;
				padding:10px;
				height:15px;
				font-family:verdana;
				font-size:12px;
				color:#000;
				cursor:pointer;
				
				-webkit-transition: opacity 2s ease-in;
				-moz-transition: opacity 2s ease-in;
				-o-transition: opacity 2s ease-in;
				-ms-transition: opacity 2s ease-in;
				transition: opacity 2s ease-in;
			}
			.selectedReport
			{
				background:#777;
			}
			.input_back:hover,.input_back:hover:before
			{
				background:#00FF99;
				content: 'Add ';
			}
			
			.input_back.selectedReport:hover, .input_back.selectedReport:hover:before
			{
				background:#FF6633;
				content: 'Remove ';
			}

			.display
			{
				width:800px;
				margin-top:30px;
				font-weight:bold;
				font-size:30px;
				font-family:verdana;
				color:#bbb;
			}
			
			.contenttree
			{
				width:800px;
				height:430px;
				margin-left: auto;
				margin-right: auto;
				margin-top:130px;
				background:#fff;
			}
			
			

			#logo_holder
			{
				padding-top:10px;
				padding-left:50px;
				/*padding-right:20px;*/
				width:auto;
				float:left;
				font-family:verdana;
				font-size:50px;
				color:#FFFFFF;
				font-weight:bold;
				margin-top:20px;
				margin-left:30px;
				/*text-align:center;*/
			}
			#logoTwo_holder
			{
				padding-top:10px;
				padding-right:20px;
				width:auto;
				float:left;
				font-family:verdana;
				font-size:60px;
				color:#0000FF;
				font-weight:bold;
				/*text-align:center;*/
				margin-top:12px;

			}

			#title
			{
				width:650px;
				margin:0 auto;
				padding-top:45px;
				text-align:center;
				font-weight:bold;
				font-family:verdana;
				font-size:24px;
				color:#FFFFFF;
			}

			#logo
			{
				float:left;
				clear:none;
				position:absolute;
				top:0px;
				right:15px;
			}

			#content_head
			{
				width:100%;
				height:20px;
				margin:0 auto;
				padding-top:12px;
				text-align:center;
				font-family:verdana;
				font-size:15px;
				font-weight:bolder;
			}
			
			.footerSelectedReports
			{
				background:#ccc;
				position:fixed;
				bottom:0;
				left:0;
				height:10%;
				width:60%;
				margin:0;
				padding:0;
			}
			.footerOrgunit
			{
				background:#ddd;
				position:fixed;
				bottom:0;
				left:60%;
				height:10%;
				width:20%;
				margin:0;
				padding:0;
			}
			.footerPeriod
			{
				background:#ccc;
				position:fixed;
				bottom:0;
				left:80%;
				height:10%;
				width:20%;
				margin:0;
				padding:0;
			}
			
			.footerDivHeading
			{
				position:absolute;
				width:150px;
				height:20px;
				background:#999;
				left:0;
				top:0;
				color:#000;
				font-family:verdana;
				font-weight:bold;
				font-size:12px;
				text-align:center;
				padding-top:3px;
			}
			
			.footerContent
			{
				position:absolute;
				width:100%;
				height:22px;
				left:10px;
				bottom:5px;
				color:#000;
				font-family:verdana;
				font-size:12px;
				text-align:left;
				padding-top:3px;
				overflow:hidden;
			}
			
			.footerSelReportBack
			{
				position:relative;
				width:20%;
				height:22px;
				left:10px;
				bottom:5px;
				color:#000;
				background:#eee;
				font-family:verdana;
				font-size:12px;
				text-align:center;
				padding-top:5px;
				display:inline-block;				
				margin-right:5px;
				cursor:pointer;
				
				animation-delay:0.2s; -moz-animation-delay:0.2s; -webkit-animation-delay:0.2s;
			}
			.footerSelReportBack:hover
			{
				background:#FF6633
			}
			
			#extra:hover
			{
				background:#87CEFA;
			}
			.footerSelReportBackDelete
			{
				position:absolute;
				width:10%;
				height:22px;
				right:0;
				bottom:0;
				color:#000;
				font-family:verdana;
				font-size:12px;
				font-weight:bold;
				text-align:center;
				padding-top:5px;
				cursor:pointer;
			}
			
			
			.parameterBack
			{
				position:relative;
				margin-left:0;
				width:230px;
				text-align:center;
				background:#ccc;
				padding:10px;
				height:15px;
				font-family:verdana;
				font-size:12px;
				color:#000;
				font-weight:bold;
				text-align:right;
				padding-right:20px;
			}
			
			.parameterInputBack
			{
				position:relative;
				margin-left:0;
				width:230px;
				text-align:center;
				background:#ccc;
				padding:10px;
				height:15px;
				font-family:verdana;
				font-size:12px;
				color:#000;
				font-weight:bold;
				font-weight:bold;
				text-align:left;
				padding-left:20px;
			}
			
		</style>
		<script type ="text/javascript">
			var uid=false;
			var selectedReportsId=[];
			var selectedReportsNames=[];
			var numOfReports=0;
			var numOfNetReports=0;
			var noOfMonths=0;
			var selectedOrgUnitUid = 0;
			
			var latestReportType=false; //---- R for raw data, M for monitoring etc
			
			jQuery( document ).ready( function() 
			{			
				$(".input_back").click(function() 
				{
					if($(this).hasClass('selectedReport'))
					{
						$(this).removeClass('selectedReport');
					}
					else
					{
						$(this).addClass('selectedReport');
					}
					selectedReports($(this).attr('id'));
					$(this).removeAttr('style');
				}); 
				
				//selectionTree.clearSelectedOrganisationUnits();
				selectionTreeSelection.setMultipleSelectionAllowed( false );
				selectionTree.clearSelectedOrganisationUnitsAndBuildTree();
				$("input[value=Back]").closest('div').hide();
				//console.log(periods);
				//console.log(orgUnit);
				
				var r = document.getElementById("printButton");
				document.getElementById('applicationsButton').style.display="none";
				document.getElementById('profileButton').style.display="none";
				
				$("#btnExport").click(function(e) {
			window.open('data:application/vnd.ms-excel,'+ encodeURIComponent($('#printing').html()));
			e.preventDefault();
		});
			});		
			
			
			function selectedReports(id)
			{
				var isAlreadySelected=false;
				var gotUid = getUidOrNameOfTheReport(id,"uid");
				
				for(var f=0; f<selectedReportsId.length;f++)
				{
					if(selectedReportsId[f]==gotUid)
					{
						isAlreadySelected=true;
					}
				}
				
				if(isAlreadySelected)
				{
					removeReportFromFooter(document.getElementById("footer"+id));
				}
				else
				{
					selectedReportsId[numOfReports]=getUidOrNameOfTheReport(id,"uid");
					selectedReportsNames[numOfReports]=id;
					numOfReports++;
					numOfNetReports++;
					
					showReportsInFooter(id);
				}	

					
					if(numOfNetReports<5)
					{
						document.getElementById('extra').style.display="none";
					}
					else
					{
						showReportsInFooter("Extra");
					}
			}
			
			function showReportsInFooter(id)
			{
				
				if(id=="Extra")
				{
					var specialId="extra";
					var htmlScriptForAppending = "Total : "+(numOfNetReports);
					document.getElementById('extra').style.display="block";
					document.getElementById('extra').innerHTML=htmlScriptForAppending;
				}
				else
				{
					var report = document.getElementById(id).innerHTML;	
					var specialId="footer"+id;
					var htmlScriptForAppending = "<div class='footerSelReportBack' id="+specialId+" onclick='removeReportFromFooter("+specialId+")'>";
					htmlScriptForAppending = htmlScriptForAppending + report+"["+ latestReportType +"]"; 
					htmlScriptForAppending += "<div class='footerSelReportBackDelete' onclick='removeReportFromFooter("+specialId+")'>X</div>";
					htmlScriptForAppending +="</div>";				
					
					
					var reportsDiv = document.getElementById('selectedReportsDiv');
					reportsDiv.innerHTML=htmlScriptForAppending+reportsDiv.innerHTML;
				}
			}
			
			function removeReportFromFooter(id)
			{
				var elementId = id.id;
				var deletedReport = 0;
				var deletedIndex = 0;
				
				//removing footer from string to get original element
				elementId = elementId.substring(6);
				id.remove();
				document.getElementById(elementId).style.background="#ccc";
				
				var uid= getUidOrNameOfTheReport(elementId,"uid");
				for(var f=0; f<selectedReportsId.length;f++)
				{
					if(selectedReportsId[f]==uid)
					{
						deletedIndex=f;
						deletedReport=selectedReportsNames[f];
						selectedReportsId[f]="deleted";
						numOfNetReports--;
					}
				}
				
					if(numOfNetReports<5)
					{
						document.getElementById('extra').style.display="none";
					}
					else
					{
						showReportsInFooter("Extra");
					}
			}
		
		function printReport()
		{
			
			var oid=0;
			
			if(document.getElementsByClassName('selected')[0])
			{
				oid=document.getElementsByClassName('selected')[0].href;					
				oid=oid.split("\"")[1];
			}
			
			if(numOfNetReports==0)
			{
				alert("Please select a report");
				return false;
			}
			
			if(oid==0)
			{
				alert("Please select an organization unit");
				return false;
			}
			
			var perd=document.getElementById('cyear').value+document.getElementById('reportingPeriod').value;
			
			
			var rdur=document.getElementById('duration').value;
			
			for(var t=0; t<selectedReportsId.length;t++)
			{
				var rid=selectedReportsId[t];
				if(rid!="deleted")
				{
					var url="../dhis-web-reporting/generateHtmlReport.action?uid="+rid+"&pe="+perd+"&ou="+oid+"&rdur="+rdur+"";
					window.open(url);
				}
			}
		}

	

	

	function programmechange() 
		{
			var e = document.getElementById("divShow");
			var rawdata = document.getElementById ( "rawdata" ) ;
			var analyseddata = document.getElementById ( "analyseddata" ) ;
			var verification = document.getElementById ( "verification" ) ;
			var monitoring = document.getElementById ( "monitoring" ) ;
			var sub = document.getElementById ( "sub" ) ;
			var dis = document.getElementById ( "display" ) ;
			$('#defSel').remove();
			$('#divShow').removeAttr('style');
			
			var strUser = e.options[e.selectedIndex].value;
			if (strUser=="rawdata")
			{
				latestReportType = "R";
				rawdata.style.display = "block" ;
				analyseddata.style.display = "none" ;
				verification.style.display = "none" ;
				monitoring.style.display = "none" ;
				sub.style.display = "block" ;
				dis.style.display = "none" ;
				noOfMonths=4;
			}
			else if(strUser=="analyseddata")
			{ 
				latestReportType = "A";
				rawdata.style.display = "none" ;
				analyseddata.style.display = "block" ;
				verification.style.display = "none" ;
				monitoring.style.display = "none" ;
				sub.style.display = "block" ;
				dis.style.display = "none" ;
				noOfMonths=4;
			}
			else if (strUser=="verification")
			{ 
				latestReportType = "V";
				rawdata.style.display = "none" ;
				analyseddata.style.display = "none" ;
				verification.style.display = "block" ;
				monitoring.style.display = "none" ;
				sub.style.display = "block" ;
				dis.style.display = "none" ;
				noOfMonths=12;
				verificationSelected();
			}
			else if (strUser=="monitoring")
			{ 
				latestReportType = "M";
				rawdata.style.display = "none" ;
				analyseddata.style.display = "none" ;
				verification.style.display = "none" ;
				monitoring.style.display = "block" ;
				sub.style.display = "block" ;
				dis.style.display = "none" ;
				noOfMonths=12;
			}
			else
			{
				latestReportType = false;
				rawdata.style.display = "none" ;
				analyseddata.style.display = "none" ;
				verification.style.display = "none" ;
				monitoring.style.display = "none" ;
				sub.style.display = "none" ;
				dis.style.display = "block" ;
				noOfMonths=0;
			}
			
			document.getElementById("duration").value=noOfMonths;
		}
		

		function getUidOrNameOfTheReport(divId,uidOrName)
		{
			var reportId=null;
			var value=null;
			
			if (divId=='rawEPI') {reportId="TSSZVBS2PGh"; value="EPI";}
			else if (divId=='rawGESI') {reportId="L9uE0r6e3Cn"; value="GESI";}
			else if (divId=='rawHealth') {reportId="YcyOM5oaFD3"; value="Health Institutions";}
			else if (divId=='rawCBIMCI') {reportId="ZSheKWrFCk8"; value="CBIMCI";}
			else if (divId=='rawNutrition') {reportId="rxFEgu60bUl"; value="Nutrition";}
			else if (divId=='rawMotherhood') {reportId="vweVo0clYrO"; value="Safe Motherhood";}
			else if (divId=='rawPHCORC') {reportId="ZO4UBuAkj7c"; value="PHCORC";}
			else if (divId=='rawLeprosy') {reportId="EAMZZiICIqC"; value="Leprosy";}
			else if (divId=='rawOPD') {reportId="KSaRVqlIaWV"; value="OPD";}
			else if (divId=='rawLAB') {reportId="uYxukqlWlsh"; value="LAB";}
			else if (divId=='rawFamily') {reportId="nbDnkALVMTz"; value="Family planning";}
			else if (divId=='rawTb') {reportId="elphNEgwxiH"; value="Tuberculosis";}
			else if (divId=='rawHIV') {reportId="PpfpfQE5ZDX"; value="HIV/AIDS";}
			
			
			else if(divId=='anaFCHV')       {reportId="dOz8YvwOmQi";value="FCHV";}//1
			else if(divId=='anaHMI')       {reportId="V76OrtA4fF1";value="Health_Major_Indicators";}//2
			else if(divId=='anaHMMI')       {reportId="llwr5ETfkht";value="Hospital_Major_Indicators";}//3
			else if(divId=='anaKala')       {reportId="osPOSqhDwp1";value="Kala-azar";}//4
			else if(divId=='anaLeprosy')       {reportId="J0DSNpTgHRP";value="Leprosy";}//5
			else if(divId=='anaMalaria')       {reportId="Y95lPpYlyWR";value="Malaria";}//6
			else if(divId=='anaOPD')       {reportId="kvFhnv4xH3j";value="OPD";}//7
			else if(divId=='anaPHCORC')       {reportId="G15BBUonjxZ";value="PHCORC";}//8
			else if(divId=='anaSM')       {reportId="u7GDYzLXrxQ";value="Safe_Motherhood";}//9
			else if(divId=='anaTuberculosis')       {reportId="hBbm8MWYVgb";value="Tuberculosis";}//10
			else if(divId=='anaImmunization')       {reportId="TiXk52JQx6W";value="Immunization";}//11
			else if (divId=='anaReporting') {reportId="O5hP14L1JID"; value="Reporting status";}//12
			else if(divId=='anaCBIMCI')       {reportId="ieTkhm7x0RL";value="CBIMCI";}//13
			else if(divId=='anaNutrition')       {reportId="zeuz2vf31bk";value="Nutrition";}//14
			
			else if (divId=='monIMM') {reportId="gMHInEJskef"; value="Immunization";}
			else if (divId=='monRep') {reportId="DawkimUW9Xz"; value="Reporting Status";}
			else if (divId=='monFCHV') {reportId="iaptGPcWm9h"; value="FCHV";}
			else if (divId=='monFP') {reportId="lBRPb7VAiyd"; value="Family Planning";}
			else if (divId=='monFHS') {reportId="BW0mYfaPvM8"; value="Free Health";}
			else if (divId=='monHIV') {reportId="JJHYa2Wnw60"; value="HIV/AIDS";}
			else if (divId=='monIMCI') {reportId="AJY7REooEpL"; value="IMCI";}
			else if (divId=='monLab') {reportId="uBE46Z63nYl"; value="Laboratory";}
			else if (divId=='monNutrition') {reportId="TlF0soMhA8Q"; value="Nutrition";}
			
			else if (divId=='monMalaria') {reportId="HaLN7Wx9wPK"; value="Malaria";}
			else if (divId=='monTub') {reportId="xPhW2mTu4IU"; value="Tuberculosis";}
			else if (divId=='monLeprosy') {reportId="wC0JscJGShW"; value="Leprosy";}
			else if (divId=='monSMH') {reportId="laO3Xdns8Ig"; value="Safe Motherhood";}
			
			else if (divId=='verAll') {reportId="BKpe2WpvNmU"; value="All Verification";}
			
			if(uidOrName=="uid")
			{
				return reportId;
			}
			else if(uidOrName=="name")
			{
				return value;
			}
		}

		function viewTree()
		{
			//document.getElementById('Rtitle').innerHTML=value+" report parameters";
			document.getElementsByClassName('content')[0].style.display="none";
			document.getElementsByClassName('contenttree')[0].style.display="block";
			document.getElementById('tree').style.display="block";	
			printMonths();
			printOrgunit();
		}
		
		function goback()
		{
			document.getElementsByClassName('content')[0].style.display="block";
			document.getElementsByClassName('contenttree')[0].style.display="none";
		}
		
		function validateMonths()
		{
			var x = document.getElementById('duration').value;
			if(x==1)
			{
				document.getElementById('monthCap').innerHTML="month";
			}
			else
			{
				document.getElementById('monthCap').innerHTML="months";
			}
			
			if(x>12)
			{
				document.getElementById('duration').value=12;
				document.getElementById('monthCap').innerHTML="months";
			}
			
			if(x<1)
			{
				document.getElementById('duration').value=1;
				document.getElementById('monthCap').innerHTML="month";
			}
			
			printMonths();
		}
		
		function validateYear()
		{
			var y=document.getElementById('cyear').value;
			
			if(!(y>0 && y<2200))
			{
				document.getElementById('cyear').value=2071;
			}
			
			printMonths();
		}
				
		function getMonthTitle(month)
		{
			//alert(month);
			var strMonth="";
			
			if(month=="01" || month=="1")
				strMonth="Baishakh";
			else if(month=="02" || month=="2")
				strMonth="Jestha";
			else if(month=="03" || month=="3")
				strMonth="Ashadh";
			else if(month=="04" || month=="4")
				strMonth="Shrawan";
			else if(month=="05" || month=="5")
				strMonth="Bhadra";
			else if(month=="06" || month=="6")
				strMonth="Ashwin";
			else if(month=="07" || month=="7")
				strMonth="Kartik";
			else if(month=="08" || month=="8")
				strMonth="Mangsir";
			else if(month=="09" || month=="9")
				strMonth="Poush";
			else if(month=="10")
				strMonth="Magh";
			else if(month=="11")
				strMonth="Falgun";
			else if(month=="12")
				strMonth="Chaitra";
			
			return strMonth;
		}
		
		function printMonths()
		{
			var d = parseInt(document.getElementById('duration').value);
			var y = parseInt(document.getElementById('cyear').value);
			var m= parseInt(document.getElementById('reportingPeriod').value);
			
			var yy=0;
			var nextYear=false;
			var mm = m+d-1;
			if(mm>12) 
			{
				mm=mm%12;
				yy=y+1;
				nextYear=true;
			}
			
			
			if(d>1)
			{
				var str;
				
				if(nextYear)
				{
					str=getMonthTitle(m)+" - "+y+" TO "+getMonthTitle(mm)+" - "+yy;
				}
				else
				{
					str=getMonthTitle(m)+" TO "+getMonthTitle(mm)+" - "+y;
				}
				document.getElementById('monthTile').innerHTML=str;
			}
			else
			{
				document.getElementById('monthTile').innerHTML=getMonthTitle(m)+" - "+y;
			}
		}

		function printOrgunit()
		{
			var org = "Not Selected yet";
			if(document.getElementsByClassName('selected')[0])
			{
				org=document.getElementsByClassName('selected')[0].innerHTML;	
			}
			document.getElementById('orgTitle').innerHTML=org;
			
			var oid=0;
			
			if(document.getElementsByClassName('selected')[0])
			{
				oid=document.getElementsByClassName('selected')[0].href;					
				oid=oid.split("\"")[1];
				selectedOrgUnitUid = oid;
			}
		}
		
		function verificationSelected()
		{
			document.getElementById("btnContinue").style.display="block";
			document.getElementById("btnBack").style.display="none";
			document.getElementById("btnCancel").style.display="block";
			document.getElementById("btnGenerate").style.display="none";
			document.getElementById("btnExport").style.display="none";
			$("#NepalFooter").hide();
			viewTree();
		}
		
		var dataSetArray = [];
		
		function viewVerificationDataSets()
		{
			$("#divShow").hide();
			goback();
			
			console.log("../api/organisationUnits/"+selectedOrgUnitUid+".json?fields=id,name,dataSets[id,name,shortName,code]");
			$.get("../api/organisationUnits/"+selectedOrgUnitUid+".json?fields=id,name,dataSets[id,name,shortName,code]",function(json)
			{
				extractDataSets(json);
				printDataSets();
			});
		}
		
		function printDataSets()
		{
			if(dataSetArray.length>0)
			{
				$("#verification").html("<Select multiple id='verDS' style='height:350px;width:400px;text-align:left'></select>");
				for(var a=0; a< dataSetArray.length; a++)
				{
					//alert(dataSetArray[a][2]);
					$("#verDS").append('<option style="text-align:left" value="'+dataSetArray[a][0]+'">'+dataSetArray[a][3]+'</option>');
				}
				$("#verification").append('<div class="parameterBack" id="sub" style="width:220px;margin-left:450px;background:#87CEFA;text-align:center;cursor:pointer;margin-top:20px" onclick="viewVerReports()"> Continue </div>');
				$("#verification").append('<div class="parameterBack" id="sub" style="width:220px;margin-left:450px;background:#87CEFA;text-align:center;cursor:pointer;margin-top:20px" onclick="location.reload()"> Cancel </div>');
				
			}
			else
			{
				$("#verification").html("<i style='font-size:12px'> No datasets available. Try another organisation unit. Thank you. </i>");
				$("#verification").append('<div class="parameterBack" id="sub" style="width:220px;margin-left:450px;background:#87CEFA;text-align:center;cursor:pointer;margin-top:20px" onclick="verificationSelected()"> Change OrgUnit </div>');
			}
			
		}
		
		function extractDataSets(dataSetJson)
		{
			dataSetArray = [];
			//-------------------------------------------------------------------
			for (var i=0; i < dataSetJson.dataSets.length; i++)
			{
				var tempDataSetArray = [];
				tempDataSetArray[0]=dataSetJson.dataSets[i].id;
				tempDataSetArray[1]=dataSetJson.dataSets[i].shortName;
				tempDataSetArray[2]=dataSetJson.dataSets[i].code;
				tempDataSetArray[3]=dataSetJson.dataSets[i].name;
				dataSetArray[i] = tempDataSetArray;
			}
			
			sortDataSetAccordingToCode();
		}
		
		function sortDataSetAccordingToCode()
		{
			for(var a=0; a< dataSetArray.length-1; a++)
			{
				for(var b=0; b< dataSetArray.length-1; b++)
				{
					if(dataSetArray[b][3] > dataSetArray[b+1][3])
					{
						var tempId = dataSetArray[b][0];
						var tempName = dataSetArray[b][1];
						var tempCode = dataSetArray[b][2];
						var tempDname = dataSetArray[b][3];
						
						dataSetArray[b][0] = dataSetArray[b+1][0];
						dataSetArray[b][1] = dataSetArray[b+1][1];
						dataSetArray[b][2] = dataSetArray[b+1][2];
						dataSetArray[b][3] = dataSetArray[b+1][3];
						
						dataSetArray[b+1][0] = tempId;
						dataSetArray[b+1][1] = tempName;
						dataSetArray[b+1][2] = tempCode;
						dataSetArray[b+1][3] = tempDname;
					}
				}
			}
		}
		
		function viewVerReports()
		{
			var appendedIds = "";
			$("#verDS option:selected").each(function () {
			   var $this = $(this);
			   if ($this.length) {
				var selText = $this.text();
				console.log(selText);
				appendedIds = appendedIds + $this.val() + ";";
			   }
			});
			
			var oid=0;
			
			if(document.getElementsByClassName('selected')[0])
			{
				oid=document.getElementsByClassName('selected')[0].href;					
				oid=oid.split("\"")[1];
			}
			
			if(appendedIds=="")
			{
				alert("Please select atleast one dataset");
				return false;
			}
			
			if(oid==0)
			{
				alert("Please select an organization unit");
				return false;
			}
			
			var perd=document.getElementById('cyear').value+document.getElementById('reportingPeriod').value;
			
			
			var rdur=document.getElementById('duration').value;
			
			var url="../dhis-web-reporting/generateHtmlReport.action?uid=BKpe2WpvNmU&pe="+perd+"&ou="+oid+"&rdur="+rdur+"&dSets="+appendedIds;
			window.open(url);
		}
	</script>

	
	
		<div id="NepalHeader">HMIS Reports - NEPAL</div>

		<div class="content" id="typeSel" align="center" style="margin-top:150px;display:block">
			<select id="divShow"  onChange="programmechange()" style="position:fixed;top:50%;left:50%;margin-left:-150px">
					<option id="defSel">Select</option>
					<option value="rawdata">Raw Data</option>
					<option value="analyseddata">Analysed Data</option>
					<option value="monitoring">Monitoring</option>
					<option value="verification">Verification</option>
			</select>
			
			<div id="display" class="display" style="display:block;position:fixed;top:50%;left:50%;margin-left:-400px;margin-top:-40px">
				Please select a category to generate reports
			</div>
			
			<div id="rawdata" class="display" align="left" style="display:none">
				<div class="input_back" id="rawGESI">GESI
				</div>
				
				<div class="input_back" id="rawHealth">Health Institution
				</div>
				
				<div class="input_back" id="rawCBIMCI">CBIMCI 
				</div>
				
				<div class="input_back" id="rawEPI">EPI
				</div>
				
				<div class="input_back" id="rawNutrition">Nutrition
				</div>
				
				<div class="input_back" id="rawMotherhood" > Safe motherhood
				</div>
				
				<div class="input_back" id="rawPHCORC" > PHCORC
				</div>
				
				<div class="input_back" id="rawLeprosy" > Leprosy
				</div>
				
				<div class="input_back" id="rawOPD" > OPD
				</div>
				
				<div class="input_back" id="rawLAB" > LAB
				</div>
				
				<div class="input_back" id="rawFamily" > Family Planning
				</div>
				
				<div class="input_back" id="rawTb" > Tuberculosis
				</div>
				
				<div class="input_back" id="rawHIV" > HIV/AIDS
				</div>
				
				<div class="parameterBack" style="width:220px;background:#87CEFA;text-align:center;cursor:pointer;margin-left:520px;margin-top:20px" onclick="viewTree()"> Continue
				</div>
			</div>
			
			
			
			<div id="analyseddata" class="display" align="left" style="display:none">
				
				<div class="input_back" id="anaFCHV" >FCHV
				</div>
				<div class="input_back" id="anaHMI" >Health_Major_Indicators
				</div>
				<div class="input_back" id="anaHMMI" >Hospital_Major_Indicators
				</div>
				<div class="input_back" id="anaKala" > Kala-azar
				</div>
				<div class="input_back" id="anaLeprosy" >Leprosy
				</div>
				<div class="input_back" id="anaMalaria" >Malaria
				</div>
				<div class="input_back" id="anaOPD" >OPD
				</div>
				<div class="input_back" id="anaPHCORC" >PHCORC
				</div>
				<div class="input_back" id="anaSM" >Safe Motherhood
				</div>
				<div class="input_back" id="anaTuberculosis" >Tuberculosis
				</div>
				<div class="input_back" id="anaImmunization" >Immunization
				</div>
				<div class="input_back" id="anaReporting" >Reporting status
				</div>
				<div class="input_back" id="anaCBIMCI" >CBIMCI
				</div>
				<div class="input_back" id="anaNutrition" >Nutrition
				</div>
				<!--<div id="input_back">
					<input type="radio" name="option1" id="anaEPI" value="EPI"/>
					<label class="input_label" for="anaEPI" > EPI </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaNutrition" value="Nutrition"/>
					<label class="input_label" for="anaNutrition" > Nutrition </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaMotherhood" value="Motherhood"/>
					<label class="input_label" for="anaMotherhood" > Safe Motherhood </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaFP" value="FP"/>
					<label class="input_label" for="anaFP" > FP </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaPHCORC" value="PHCORC"/>
					<label class="input_label" for="anaPHCORC" > PHCORC </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaFCHV" value="FCHV"/>
					<label class="input_label" for="anaFCHV" > FCHV </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaMalaria" value="Malaria"/>
					<label class="input_label" for="anaMalaria" > Malaria </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaKalaazar" value="Kalaazar"/>
					<label class="input_label" for="anaKalaazar" > Kalaazar </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaLeprosy" value="Leprosy"/>
					<label class="input_label" for="anaLeprosy" > Leprosy </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaOPD" value="OPD"/>
					<label class="input_label" for="anaOPD" > OPD </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaTuberculosis" value="Tuberculosis"/>
					<label class="input_label" for="anaTuberculosis" > Tuberculosis </label>
				</div>
				
				<div id="input_back">
					<input type="radio" name="option1" id="anaHospital" value="Hospital"/>
					<label class="input_label" for="anaHospital" > Hospital </label>
				</div>-->
				<div class="parameterBack" style="width:220px;background:#87CEFA;text-align:center;cursor:pointer;margin-left:520px;margin-top:20px" onclick="viewTree()"> Continue
				</div>
			</div>
			
			
			<div id="verification" class="display" align="left" style="display:none;text-align:center;">
				
					Loading Datasets... Please wait...
				
				
			</div>
			
			<div id="monitoring" class="display" align="left" style="display:none">
				<div class="input_back" id="monIMM" > Immunization
				</div>
				
				<div class="input_back" id="monRep" > Reporting Status
				</div>
				
				<div class="input_back" id="monFCHV" > FCHC	
				</div>
				
				<div class="input_back" id="monFHS" > Free Health
				</div>
				
				<div class="input_back" id="monFP" > Family Planning
				</div>
				
				<div class="input_back" id="monIMCI" > IMCI	
				</div>
				
				<div class="input_back" id="monHIV" > HIV/AIDS
				</div>
				
				<div class="input_back" id="monPhorc" > PHCORC
				</div>
				
				<div class="input_back" id="monSMH" > Safe Motherhood
				</div>
				
				<div class="input_back" id="monTub" > Tuberculosis	
				</div>
				
				<div class="input_back" id="monMalaria" > Malaria	
				</div>
				
				<div class="input_back" id="monLeprosy" > Leprosy	
				</div>
				
				<div class="input_back" id="monLab" > Laboratory	
				</div>
				
				<div class="input_back" id="monNutrition" > Nutrition
				</div>
				
				<div class="parameterBack" id="sub" style="width:220px;background:#87CEFA;text-align:center;cursor:pointer;margin-left:520px;margin-top:20px" onclick="viewTree()"> Continue
				</div>
				
			</div>
				
		</div>
		</div>	
		
		<div class="contenttree" style="display:none">
			<input type="hidden" id="uid" name="uid" value="PjobTWrNe92" />
			<input type="hidden" id="mode" name="mode" value="report" />
			<input type="hidden" id="type" name="type" value="html" />
		
			<div id="display" class="display" style="text-align:center;margin-top:200px;">
				<div style="width:600px;margin:0 auto">
					<table>
						<tr>
							<td><div class="parameterBack">Report Duration</div></td>
							<td><div class="parameterInputBack" style="width:300px;"><input type="number" id="duration" min="1" max="12" value="1" style="font-weight:bold; padding-left:3px;" oninput="validateMonths()"> <b id="monthCap"> Months </b></div></td>
						</tr>
						
						<tr>
							<td><div class="parameterBack" style="background:#aaa">Report Starting Month</div></td>
							<td>
									<div class="parameterInputBack" style="width:300px;background:#aaa">
												<select id="reportingPeriod" class="monthSel" name="reportingPeriod" style="width:200px;margin-top:0;" onchange="printMonths()" >               
																		
																		<option value="04">Shrawan</option>
																		<option value="03">Asar</option>
																		<option value="02">Jestha</option>
																		<option value="01">Baishak</option>
																		<option value="12">Chaitra</option>
																		<option value="11">Falgun</option>
																		<option value="10">Magh</option>
																		<option value="09">Poush</option>
																		<option value="08">Mangsir</option>
																		<option value="07">Kartik</option>
																		<option value="06">Ashwin</option>
																		<option value="05">Bhadra</option>
																		
												</select>
												
												<input type="number" id="cyear" min="2060" max="2100" oninput="validateYear()" value="2073" style="font-weight:bold; padding-left:3px;">
									</div>
							</td>
						</tr>
						
						<tr>
							<td valign="top"><div class="parameterBack">Organisation unit</div></td>
							<td rowspan="2">
								<div class="parameterInputBack" style="width:300px; height:150px" onmouseover="printOrgunit()">
									<div id="selectionTree" style="width:290px; height:130px"></div>
								</div>
							</td>
						</tr>
						<tr>
							<td></td>
						</tr>
						
						<tr>
							<td></td>
							<td id="btnGenerate" style='display:block'><div class="parameterInputBack" style="width:300px;background:#87CEFA;text-align:center;cursor:pointer" onclick="printReport()" >Generate</div>
							<td id="btnContinue" style="display:none"><div class="parameterInputBack" style="width:300px;background:#87CEFA;text-align:center;cursor:pointer" onclick="viewVerificationDataSets()" >Continue</div>
						</tr>
						<tr>
							<td></td>
							<td id="btnBack" style='display:block'><div class="parameterInputBack" style="width:300px;background:#66CCFF;text-align:center;cursor:pointer" onclick="goback()" >Back</div></td>
							<td id="btnCancel" style='display:none'><div class="parameterInputBack" style="width:300px;background:#66CCFF;text-align:center;cursor:pointer" onclick="location.reload()" >Cancel</div></td>
						</tr>
					</table>
				</div>
			
			</div>
		</div>	
		<div class="NepalFooter" id="NepalFooter">
			<div class="footerSelectedReports">
				<div class="footerDivHeading">Selected Reports</div>
				<div class="footerDivHeading" id="extra" style="left:160px;cursor:pointer;display:none"></div>
				
				<div class="footerContent" id="selectedReportsDiv"> 
				</div>
			</div>
			
			<div class="footerOrgunit">
				<div class="footerDivHeading">Selected org. Unit</div>
				
				<div class="footerContent"><b id="orgTitle"  style="margin:0;color:#000;font-size:12px;">Not selected yet</b></div>
			</div>
			
			<div class="footerPeriod">
				<div class="footerDivHeading">Selected Period</div>
				
				<div class="footerContent"><b id="monthTile" style="margin:0;color:#000;font-size:12px;">Not selected yet</b></div>
			</div>
		</div>
</div>		
		
	
